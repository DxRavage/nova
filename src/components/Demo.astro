<script>
  const url = "https://www.googleapis.com/books/v1/volumes?q=";
  let query = "brandon saderson";
  let books = [];

  async function fetchBooks() {
    const apiUrl = `${url}${encodeURIComponent(query)}`;
    const res = await fetch(apiUrl);
    const json = await res.json();

    books = json.items.map((item: any) => {
      return {
        title: item.volumeInfo.title,
        rating: item.volumeInfo.averageRating,
        thumbnail: item.volumeInfo.imageLinks.thumbnail,
      };
    });
    return books;
 
  }

  async function fetchAndLogBooks() {
    const fetchedBooks = await fetchBooks();
    console.log(fetchedBooks);
  }
  fetchAndLogBooks();

</script>
